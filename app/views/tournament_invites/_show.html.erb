<%- user_is_tournament_owner = @tournament.owner.try(:_id) === current_user._id %>
<div id="invites-widget" class="widget">
  <div class="widget-header">
    <h3>Invite Players</h3>
  </div>
  <div class="widget-content scrollable">
    <h4>Invite players to help build your tournament</h4>
    <% if user_is_tournament_owner %>
      <%= render partial: 'tournament_invites/form' %>
    <% end %>
    <% if @invites.present? %>
      <ul>
        <% @invites.each do |invite| %>
          <li>
            <div class="control-group">
              <%= invite.user.try(:username) %>
              <div class="pull-right">
                <% if user_is_tournament_owner %>
                  <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
                          user_tournament_invite_path(@tournament, invite),
                          :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
                          :method => 'delete', :class => 'btn btn-mini btn-danger' %>
                <% end %>
              </div>
            </div>
          </li>
        <% end %>
      </ul>
    <% end %>
  </div>
</div>
