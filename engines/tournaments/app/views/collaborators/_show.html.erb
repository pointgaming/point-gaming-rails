<%- user_is_tournament_owner = @tournament.owner.try(:_id) === current_user._id %>

<div id="tournament-collaborators-widget" class="widget">
  <div class="widget-header">
    <h3>Collaborators</h3>
  </div>

  <div class="widget-content scrollable">
    <h4>People to help you administrate the tournament</h4>
    <% if user_is_tournament_owner %>
      <%= render "/collaborators/form" %>
    <% end %>

    <% if @collaborators.present? %>
      <ul>
        <% @collaborators.each do |collaborator| %>
          <li>
            <div class="control-group">
              <%= collaborator.user.try(:username) %>
              <div class="pull-right">
                <% if user_is_tournament_owner && collaborator.owner != true %>
                  <%= link_to t(".destroy", default: t("helpers.links.destroy")),
                          tournament_collaborator_path(@tournament, collaborator),
                          data: { confirm: t(".confirm", default: t("helpers.links.confirm", default: "Are you sure?")) },
                          method: :delete, class: "btn btn-mini btn-danger" %>
                <% end %>
              </div>
            </div>
          </li>
        <% end %>
      </ul>
    <% end %>
  </div>
</div>
